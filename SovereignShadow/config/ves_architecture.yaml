# VES (Vault-Engine-Siphon) Architecture Configuration
# Version: 1.0.0
# Last Updated: 2025-10-21

system:
  name: "SovereignShadow VES"
  version: "1.0.0"
  mode: "production"  # Options: development, staging, production
  log_level: "INFO"   # DEBUG, INFO, WARNING, ERROR, CRITICAL
  
# Layer 1: VAULT (Cold Storage & Yield Generation)
vault:
  platform: "ledger"
  description: "Primary wealth preservation layer"
  
  assets:
    stETH:
      allocation_percent: 40
      yield_apy: 3.5
      min_balance: 0.1
      compounding: true
      
    AAVE:
      allocation_percent: 30
      yield_apy: 4.2
      min_balance: 10
      lending_enabled: true
      
    ETH:
      allocation_percent: 20
      min_balance: 0.05
      gas_reserve: 0.02
      
    BTC:
      allocation_percent: 10
      min_balance: 0.001
      cold_storage: true
      
  health_monitoring:
    check_interval_minutes: 30
    collateral_ratio_warning: 1.5
    collateral_ratio_critical: 1.3
    liquidation_buffer_percent: 20
    
  yield_management:
    harvest_frequency_days: 7
    siphon_percentage: 5  # % of yield sent to siphon
    compound_remainder: true
    min_harvest_value_usd: 10

# Layer 2: ENGINE (Active Trading & Liquidity)
engine:
  platform: "coinbase"
  description: "Active trading and tactical execution layer"
  
  assets:
    USDC:
      allocation_percent: 40
      role: "stable_base"
      min_balance: 100
      
    SOL:
      allocation_percent: 25
      role: "momentum"
      position_size_max: 500
      stop_loss_percent: 5
      
    XRP:
      allocation_percent: 20
      role: "swing"
      position_size_max: 1000
      take_profit_percent: 15
      
    MEME:  # Rotating meme coin slot
      allocation_percent: 10
      role: "speculative"
      position_size_max: 200
      stop_loss_percent: 10
      daily_loss_limit: 50
      
    BUFFER:
      allocation_percent: 5
      role: "emergency"
      min_balance: 50
      
  trading_rules:
    max_positions: 5
    max_position_size_usd: 1000
    daily_loss_limit_usd: 200
    
    timeframes:
      scalp: "1m"
      short: "15m"
      medium: "4h"
      long: "6h"
      
    risk_management:
      use_stop_loss: true
      use_take_profit: true
      trailing_stop_enabled: false
      max_leverage: 1  # No leverage initially
      
    order_types:
      - "limit"
      - "market"
      - "stop_limit"

# Connector: SIPHON (Profit Distribution Logic)
siphon:
  description: "Intelligent profit routing system"
  
  distribution_rules:
    small_win:
      threshold_usd: [0, 100]
      vault_percent: 60
      engine_percent: 30
      buffer_percent: 10
      
    medium_win:
      threshold_usd: [100, 500]
      vault_percent: 70
      engine_percent: 20
      buffer_percent: 10
      
    large_win:
      threshold_usd: [500, null]  # null means infinity
      vault_percent: 80
      engine_percent: 10
      buffer_percent: 10
      
  triggers:
    check_interval_minutes: 60
    min_transfer_amount_usd: 20
    batch_transfers: true
    
  rebalancing:
    enabled: true
    frequency_days: 30
    tolerance_percent: 5  # Rebalance if allocation off by >5%

# Exchange Integration Settings
exchanges:
  coinbase:
    api_version: "advanced_trade"
    sandbox_mode: false
    rate_limit_per_second: 10
    websocket_enabled: true
    
  ledger:
    connection_type: "manual"  # Options: api, manual, bridge
    update_frequency_hours: 24
    
  binance_us:
    status: "watchlist"  # Not active due to locked transfers
    check_frequency_days: 7
    notification_enabled: true

# Monitoring & Alerts
monitoring:
  health_checks:
    vault_health: true
    engine_health: true
    siphon_health: true
    
  alerts:
    email_enabled: false
    discord_enabled: false
    notion_enabled: true
    obsidian_enabled: true
    
  metrics_tracking:
    - "total_portfolio_value"
    - "24h_pnl"
    - "7d_pnl"
    - "30d_pnl"
    - "vault_apy"
    - "engine_win_rate"
    - "siphon_flow_volume"
    
# Security Settings
security:
  api_keys_location: "environment"  # Options: environment, keychain, vault
  encryption_enabled: true
  mfa_required: false
  ip_whitelist_enabled: false
  
  rate_limiting:
    enabled: true
    max_requests_per_minute: 60
    
  audit_logging:
    enabled: true
    log_trades: true
    log_transfers: true
    log_errors: true
    retention_days: 90

# Backup & Recovery
backup:
  enabled: true
  frequency_hours: 24
  location: "./backups"
  keep_last_n: 30
  
  export_formats:
    - "json"
    - "csv"
    
# Performance Optimization
performance:
  cache_enabled: true
  cache_ttl_seconds: 300
  parallel_processing: true
  max_workers: 4